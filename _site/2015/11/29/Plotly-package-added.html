<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Plotly package added</title>
  <meta name="description" content="Create amazing charts with the power of Plotly and save it wherever you want (without needing a Plotly account).">

  <!--link rel="stylesheet" href="/portableR/css/main.css"-->

  <link rel="stylesheet" type="text/css" href="/portableR/stylesheets/normalize.css" media="screen">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/portableR/stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/portableR/stylesheets/github-light.css" media="screen">

  <link rel="canonical" href="http://nafiux.github.io/portableR/portableR/2015/11/29/Plotly-package-added.html">
  <link rel="alternate" type="application/rss+xml" title="portableR" href="http://nafiux.github.io/portableR/portableR/feed.xml" />
</head>


  <body>

    <section class="page-header">
  <h1 class="project-name"><a href="/portableR/">portableR</a></h1>
  <h2 class="project-tagline">R Statistics ready to run in <strong>AWS Lambda</strong> and x86_64 Linux VMs</h2>
  <a href="https://github.com/nafiux/portableR" class="btn">View on GitHub</a>
  <a href="https://github.com/nafiux/portableR/zipball/master" class="btn">Download .zip</a>
  <a href="https://github.com/nafiux/portableR/tarball/master" class="btn">Download .tar.gz</a>
</section>


    <section class="main-content">

        <!--
      	
      		
      	
      		
      	
        -->

        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Plotly package added</h1>
    <p class="post-meta">Nov 29, 2015</p>
  </header>

  <article class="post-content">
    <p>Create amazing charts with the power of <strong><a href="https://github.com/ropensci/plotly">Plotly</a></strong> and save it wherever you want (without needing a Plotly account).</p>

<h2 id="example">Example</h2>

<iframe width="100%" height="500px" src="http://nafiux.com.s3-website-us-east-1.amazonaws.com/test/plotly-r.html"></iframe>

<h3 id="create-a-chart-using-plotly-with-data-query-from-redshift">Create a chart using <strong>Plotly</strong> with data (query) from RedShift</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>library("RPostgreSQL")
drv &lt;- dbDriver("PostgreSQL")
con &lt;- dbConnect(
	drv,
	host="YourDataWareHouse.us-east-1.redshift.amazonaws.com",
	port="5439",
	dbname="tehuixtla",
	user="pueblo",
	password="querido"
)
projectId &lt;- commandArgs(trailingOnly=TRUE)[1]
query &lt;- paste0("SELECT field1, field2, field3 FROM table1 WHERE field3 IN ( SELECT field3 FROM table2 WHERE projectid = '", projectId, "') ORDER BY field1")
records &lt;- dbGetQuery(con, query)

library(plotly)

p &lt;- plot_ly(records, x = field1, y = field2, color = field3)
p

##########################
### Two magic lines!!! ###
##########################

files &lt;- list.files(tempdir(), pattern = "\\.html$", recursive=TRUE)
file.copy(paste0(tempdir(), "/", files[1]), paste0("/tmp/", projectId, ".html"), overwrite = TRUE)
</code></pre>
</div>

<h3 id="about-the-two-magic-lines">About the two magic lines</h3>

<p>Every time that you runs R, it creates a new temporary folder for each session, so that when you call plot_ly function, it creates a html file in this temporary folder.</p>

<p>Having this in mind, you can get the html output file from the temporary folder and save it wherever you need.</p>


  </article>

</div>


        <footer class="site-footer">
  <span class="site-footer-owner"><a href="https://github.com/nafiux/portableR">portableR</a> is maintained by <a href="https://github.com/nafiux">Ignacio Ocamp</a>.</span>

  <span class="site-footer-credits">This page was generated by <a href="http://jekyllrb.com/">Jekyll</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
</footer>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-67793246-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>


    </section>

  </body>

</html>
